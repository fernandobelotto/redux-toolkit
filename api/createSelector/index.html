<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-130598673-3","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux Toolkit" href="/redux-toolkit/opensearch.xml"><title data-react-helmet="true">createSelector | Redux Toolkit</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" property="og:image" content="https://fernandobelotto.github.io/redux-toolkit/img/redux-logo-landscape.png"><meta data-react-helmet="true" property="twitter:image" content="https://fernandobelotto.github.io/redux-toolkit/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Redux Toolkit"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="createSelector | Redux Toolkit"><meta data-react-helmet="true" name="description" content="createSelector"><meta data-react-helmet="true" property="og:description" content="createSelector"><meta data-react-helmet="true" property="og:url" content="https://fernandobelotto.github.io/redux-toolkit/api/createSelector"><link data-react-helmet="true" rel="shortcut icon" href="/redux-toolkit/img/favicon/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://fernandobelotto.github.io/redux-toolkit/api/createSelector"><link rel="stylesheet" href="/redux-toolkit/styles.98acaeb6.css">
<link rel="preload" href="/redux-toolkit/styles.8e2df2eb.js" as="script">
<link rel="preload" href="/redux-toolkit/runtime~main.f2ffa899.js" as="script">
<link rel="preload" href="/redux-toolkit/main.8855d00d.js" as="script">
<link rel="preload" href="/redux-toolkit/1.57fadc6f.js" as="script">
<link rel="preload" href="/redux-toolkit/2.ffe88765.js" as="script">
<link rel="preload" href="/redux-toolkit/27.ed6da2e2.js" as="script">
<link rel="preload" href="/redux-toolkit/30.fc892cc4.js" as="script">
<link rel="preload" href="/redux-toolkit/f976f453.b05aa0e0.js" as="script">
<link rel="preload" href="/redux-toolkit/17896441.8e146be0.js" as="script">
<link rel="preload" href="/redux-toolkit/d62b2211.98e9831a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/redux-toolkit/"><img class="navbar__logo" src="/redux-toolkit/img/redux.svg" alt="Redux Logo"><strong class="navbar__title">Redux Toolkit</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/redux-toolkit/introduction/quick-start">Começo rápido</a><a class="navbar__item navbar__link" href="/redux-toolkit/api/configureStore">API</a><a href="https://github.com/reduxjs/redux-toolkit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/redux-toolkit/"><img class="navbar__logo" src="/redux-toolkit/img/redux.svg" alt="Redux Logo"><strong class="navbar__title">Redux Toolkit</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/redux-toolkit/introduction/quick-start">Começo rápido</a></li><li class="menu__list-item"><a class="menu__link" href="/redux-toolkit/api/configureStore">API</a></li><li class="menu__list-item"><a href="https://github.com/reduxjs/redux-toolkit" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introdução</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/introduction/quick-start">Início Rápido</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutoriais</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/tutorials/basic-tutorial">Basic Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/tutorials/intermediate-tutorial">Tutorial intermediário</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/tutorials/advanced-tutorial">Advanced Tutorial</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Usando Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/usage/usage-guide">Guia de uso</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/usage/usage-with-typescript">Uso com TypeScript</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Referência de API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Configuração da Store</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/configureStore">configureStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/getDefaultMiddleware">getDefaultMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/immutabilityMiddleware">Immutability Middleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/serializabilityMiddleware">Serializability Middleware</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Reducers e Actions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/createReducer">createReducer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/createAction">createAction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/createSlice">createSlice</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/createAsyncThunk">createAsyncThunk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/createEntityAdapter">createEntityAdapter</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Outros</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/redux-toolkit/api/createSelector">createSelector</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/matching-utilities">Matching Utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/redux-toolkit/api/other-exports">Outras Exportações</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="createselector"></a><code>createSelector</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#createselector" title="Direct link to heading">#</a></h1><p>The <code>createSelector</code> utility from the <a href="https://github.com/reduxjs/reselect" target="_blank" rel="noopener noreferrer">Reselect library</a>, re-exported for ease of use.</p><p>For more details on using <code>createSelector</code>, see:</p><ul><li>The <a href="https://github.com/reduxjs/reselect" target="_blank" rel="noopener noreferrer">Reselect API documentation</a></li><li><a href="https://react-redux.js.org/next/api/hooks#using-memoizing-selectors" target="_blank" rel="noopener noreferrer">React-Redux docs: Hooks API - Using memoizing selectors</a></li><li><a href="https://blog.isquaredsoftware.com/2017/12/idiomatic-redux-using-reselect-selectors/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: Using Reselect Selectors for Encapsulation and Performance</a></li><li><a href="https://github.com/markerikson/react-redux-links/blob/master/redux-reducers-selectors.md" target="_blank" rel="noopener noreferrer">React/Redux Links: Reducers and Selectors</a></li></ul><blockquote><p><strong>Note</strong>: Prior to v0.7, RTK re-exported <code>createSelector</code> from <a href="https://github.com/planttheidea/selectorator" target="_blank" rel="noopener noreferrer"><code>selectorator</code></a>, which
allowed using string keypaths as input selectors. This was removed, as it ultimately did not provide enough benefits, and
the string keypaths made static typing for selectors difficult.</p></blockquote><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="createdraftsafeselector"></a><code>createDraftSafeSelector</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#createdraftsafeselector" title="Direct link to heading">#</a></h1><p>In general, we recommend against using selectors inside of reducers:</p><ul><li>Selectors typically expect the entire Redux state object as an argument, while slice reducers only have access to a specific subset of the entire Redux state</li><li>Reselect&#x27;s <code>createSelector</code> relies on reference comparisons to determine if inputs have changed, and if an Immer Proxy-wrapped draft value is passed in to a selector, the selector may see the same reference and think nothing has changed.</li></ul><p>However, some users have requested the ability to create selectors that will work correctly inside of Immer-powered reducers. One use case for this might be collecting an ordered set of items when using <code>createEntityAdapter</code>, such as <code>const orderedTodos = todosSelectors.selectAll(todosState)</code>, and then using <code>orderedTodos</code> in the rest of the reducer logic.</p><p>Besides re-exporting <code>createSelector</code>, RTK also exports a wrapped version of <code>createSelector</code> named <code>createDraftSafeSelector</code> that allows you to create selectors that can safely be used inside of <code>createReducer</code> and <code>createSlice</code> reducers with Immer-powered mutable logic. When used with plain state values, the selector will still memoize normally based on the inputs. But, when used with Immer draft values, the selector will err on the side of recalculating the results, just to be safe.</p><p>All selectors created by <code>entityAdapter.getSelectors</code> are &quot;draft safe&quot; selectors by default.</p><p>Example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectSelf</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">:</span><span class="token parameter"> State</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> unsafeSelector </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectSelf</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> draftSafeSelector </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createDraftSafeSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  selectSelf</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#778090">// in your reducer:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> unsafe1 </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">unsafeSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> safe1 </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">draftSafeSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">2</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> unsafe2 </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">unsafeSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> safe2 </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">draftSafeSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div></div></div><p>After executing that, <code>unsafe1</code> and <code>unsafe2</code> will be of the same value, because the memoized selector was
executed on the same object - but <code>safe2</code> will actually be different from <code>safe1</code> (with the updated value of <code>2</code>),
because the safe selector detected that it was executed on a Immer draft object and recalculated using the current
value instead of returning a cached value.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/redux-toolkit/api/createEntityAdapter"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« createEntityAdapter</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/redux-toolkit/api/matching-utilities"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Matching Utilities »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/redux-toolkit/introduction/quick-start">Começo rápido</a></li><li class="footer__item"><a class="footer__link-item" href="/redux-toolkit/api/configureStore">Referência de API</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Comunidade</h4><ul class="footer__items"><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Mais</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.github.com/reduxjs/redux-toolkit" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-light.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Redux Logo" src="/redux-toolkit/img/redux_white.svg"></div><div>Direito autoral © 2015–2021 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>
<script src="/redux-toolkit/styles.8e2df2eb.js"></script>
<script src="/redux-toolkit/runtime~main.f2ffa899.js"></script>
<script src="/redux-toolkit/main.8855d00d.js"></script>
<script src="/redux-toolkit/1.57fadc6f.js"></script>
<script src="/redux-toolkit/2.ffe88765.js"></script>
<script src="/redux-toolkit/27.ed6da2e2.js"></script>
<script src="/redux-toolkit/30.fc892cc4.js"></script>
<script src="/redux-toolkit/f976f453.b05aa0e0.js"></script>
<script src="/redux-toolkit/17896441.8e146be0.js"></script>
<script src="/redux-toolkit/d62b2211.98e9831a.js"></script>
</body>
</html>